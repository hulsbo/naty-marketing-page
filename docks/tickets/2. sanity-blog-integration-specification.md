# Sanity Blog Integration Specification
**Goal:** Implement a phone-friendly, no-code authoring blog workflow using Sanity CMS while serving blog pages on `yourdomain.com/blog` for strong SEO.
**Context/Tech Stack:** Existing static marketing site, Sanity (free tier) for content authoring, static blog build/deploy via GitHub Actions and static hosting.

---

## 1. Overall Goal & Scope
The goal is to add a blog system that lets the artist publish posts directly from a mobile device without editing HTML or Git files, while keeping SEO value consolidated on the main domain path (`/blog`).

What this includes:
- Sanity Studio setup with a simplified authoring schema (title, slug, cover image, excerpt, rich text, publish date, SEO fields).
- Frontend blog pages on the same domain path:
  - Blog index page (`/blog`)
  - Blog post page (`/blog/:slug`)
- Automated build/deploy when content is published in Sanity.
- SEO baseline per post (meta tags, canonical, Open Graph, sitemap entry).

Out of scope for this ticket:
- Multilingual blog.
- Advanced editorial workflow (approval states, multi-author roles).
- Newsletter and comments system.

## 2. Discussion: Challenges & Solutions
- **Phone-first publishing UX:** Non-technical authoring must be reliable on mobile.
  *Solution:* Use Sanity Studio with minimal required fields, clear field labels, and preview text to reduce mistakes.

- **SEO consolidation:** Subdomain blog would split authority.
  *Solution:* Render blog under `/blog` on the primary domain and ensure strong internal linking from posts to booking/contact pages.

- **Build automation reliability:** Content updates must go live without manual developer steps.
  *Solution:* Configure Sanity webhook to trigger GitHub Actions build; include validation checks for required fields and failed-build alerts.

- **Performance with media-heavy content:** Blog images can degrade loading performance.
  *Solution:* Use Sanity image transforms, responsive sizes, lazy loading, and WebP/AVIF where possible.

## 3. PR Implementation Plan

*Note: PRs are structured to be atomic and represent incremental steps (commits/PRs) towards the final blog workflow.*

### PR 1: Blog Architecture & Route Scaffolding
**Goal:** Prepare the frontend structure for `/blog` pages.
**Scope:**
- Add blog route scaffolding (`/blog` index and `/blog/:slug` template).
- Add shared blog layout (header/footer consistency with landing site).
- Add temporary local mock content rendering to validate route and template behavior.
**Test Criteria:** `/blog` and `/blog/:slug` resolve correctly; layout is responsive and visually consistent with current branding.

### PR 2: Sanity Project Setup & Content Model
**Goal:** Enable no-code authoring with a clean CMS schema.
**Scope:**
- Create Sanity project and datasets (dev/prod strategy).
- Define schema for `post` document:
  - title
  - slug
  - excerpt
  - cover image
  - body (portable text)
  - publish date
  - SEO title + meta description
- Configure Studio desk structure with a simplified editor experience.
**Test Criteria:** Author can create/edit/publish a post on phone and desktop without touching code.

### PR 3: Frontend-Sanity Data Integration
**Goal:** Replace mock content with live CMS data.
**Scope:**
- Add Sanity client and read queries for index and post pages.
- Map portable text to frontend-safe rendering.
- Handle missing/invalid content gracefully (404 for unknown slug, fallback metadata).
**Test Criteria:** Published Sanity posts render in `/blog`; unpublished drafts are not publicly visible.

### PR 4: SEO Baseline & Internal Linking
**Goal:** Ensure strong SEO foundations for blog discoverability and conversions.
**Scope:**
- Add per-post SEO tags:
  - title
  - meta description
  - canonical
  - Open Graph
- Add `BlogPosting` structured data.
- Update sitemap generation to include `/blog` and post URLs.
- Add internal CTA links in post template to booking/contact anchors/pages.
**Test Criteria:** Metadata appears correctly in page source; sitemap includes blog URLs; structured data validates.

### PR 5: Publish Automation (Webhook + GitHub Actions)
**Goal:** Make publishing fully automatic after CMS publish action.
**Scope:**
- Configure Sanity webhook for publish/unpublish events.
- Configure GitHub Actions workflow to:
  - install dependencies
  - build site
  - deploy static output
- Add environment variable management and failure handling notes.
**Test Criteria:** Publishing a post in Sanity triggers successful build/deploy and updates live blog without developer intervention.

### PR 6: Authoring Playbook & Hand-off
**Goal:** Ensure the artist can confidently run the workflow independently.
**Scope:**
- Add concise editor guide:
  - create post
  - upload cover image
  - set SEO fields
  - publish/unpublish
- Add troubleshooting notes (missing slug, image too large, webhook delays).
- Add maintenance checklist for content quality and SEO hygiene.
**Test Criteria:** Author can publish a complete post from phone using only the guide; no coding steps required.

---

STATUS: SPECIFICATION
